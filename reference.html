<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb" dir="ltr">
<head>
	<title>CaveView installation</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<style>

	h1, h2 {

		margin: 0 16px 1em 16px;

	}

	h3, h4, p, pre, dl {

		margin-left: 32px;
		margin-right: 32px;

	}

	h2 {
		border-bottom: 2px solid gray;
	}

	h3 {
		margin-top: 2em;
		background-color: #eeeeee;
	}

	* {
		font-family: sans-serif;
	}

	pre {
		font-family: monospace;
		font-weight: bold;
		background-color: #eeeeee;
		padding: 8px 8px;
	}

	dd > span::before {
		content: "["
	}

	dd > span::after {
		content: "] "
	}

	dt {
		margin-bottom: 0.5em;
		font-weight: bold;
		color: #666666;
		padding-left: 16px;
	}

	dd {
		margin-bottom: 1em;
	}

	</style>
</head>
<body>
<h1>Cave View - Reference</h1>
<p>The following functions and objects are stable. Any other functions may change without warning.</p>

<h2>Funtions</h2>
<h3>CV.UI.init( &lt;id&gt;, &lt;configuration Object&gt; )</h3>
<p>Initialise CaveView - a blank screen is displayed.</p>
<h4>Parameters</h4>
<dl>
	<dt>id</dt><dd><span>string</span>The id property of the HTML element where the model will be displayed.</dd>
	<dt>configuration Object</dt><dd><span>Object</span>An Javascript object defined below.</dd>
</dl>
<h3>CV.UI.loadCave( &lt;filename&gt;, &lt;section&gt; )</h3>
<p>Load a single model.</p>
<h4>Parameters</h4>
<dl>
	<dt>filename</dt><dd><span>string</span>The filename of the model to be loaded from the survey directory (specified by the configuration object).</dd>
	<dt>section</dt><dd><span>string</span>The section name of the survey to be displayed (optional).</dd>
</dl>

<h3>CV.UI.loadCaves( &lt;array&gt; )</h3>
<p>The user interface displays a list of models to display, the first model is by default.</p>
<h4>Parameters</h4>
<dl>
	<dt>array</dt><dd><span>Array</span>an array of filenames of models to be displayed. The first file specified will be displayed initially.</dd>
</dl>
<h3>CV.Viewer.init( &lt;id&gt;, &lt;configuration Object&gt; )</h3>
<p>Initialise CaveView with no user interface other than mouse controls - a blank screen is displayed.</p>
<h4>Parameters</h4>
<dl>
		<dt>id</dt><dd><span>string</span>The id property of the HTML element where the model will be displayed.</dd>
		<dt>configuration Object</dt><dd><span>Object</span>An Javascript object defined below.</dd>
	</dl>
<h3>CV.Viewer.addOverlay( &lt;id&gt;, &lt;overlay provider&gt; )</h3>
<h4>Parameters</h4>
<h3>CV.Viewer.loadCave( &lt;filename&gt;, &lt;section&gt; )</h3>
<p>Load a single model.</p>
<h4>Parameters</h4>
<dl>
	<dt>filename</dt><dd><span>string</span>The filename of the model to be loaded from the survey directory (specified by the configuration object).</dd>
	<dt>section</dt><dd><span>string</span>The section name of the survey to be displayed (optional).</dd>
</dl>
<h2>API Objects</h2>
<h3>configuration Object</h3>
<p>The configuration object defines the location of the resources required to display models and the initial view.</p>
<h4>Properties</h4>
<dl>
	<dt>home</dt>
	<dd><span>string</span> The path to the installtion of the CaveView package.</dd>
	<dt>surveyDirectory</dt>
	<dd><span>string</span>The path of the directory containing the survey model(s) to be displayed.</dd>
	<dt>terrainDirectory</dt>
	<dd><span>string</span>The path of the directory containing terrain tiles (optional).</dd>
	<dt>view</dt>
	<dd><span>Object</span>An object, the properties of which determine the view settings applied to all models when loaded (optional).</dd>
</dl>
<h3>view Object</h3>
<h4>Properties</h4>
<dl>
	<dt>autoRotate</dt>
	<dd><span>boolean</span>auto rotation of model <span>default: false</span></dd>
	<dt>box</dt>
	<dd><span>boolean</span>visibility of model bounding box <span>default: true</span></dd>
	<dt>cameraType</dt>
	<dd><span>enummeration</span>The projection type for the display:
		<dl>
			<dt>CV.CAMERA_ORTHOGRAPHIC</dt><dd>Orthographic projection of model.</dd>
			<dt>CV.CAMERA_PERSPECTIVE</dt><dd>Perspective projection of model.</dd>
		</dl>
	</dd>
	<dt>entrances</dt>
	<dd><span>boolean</span>visibility of entrance names <span>default: true</span></dd>
	<dt>HUD</dt>
	<dd><span>boolean</span>visibility of head up display (HUD) indicatiors <span>default: true</span></dd>
	<dt>scraps</dt>
	<dd><span>boolean</span>visibility of scrap modeled passages (.lox models only) <span>default: false</span></dd>
	<dt>shadingMode</dt>
	<dd><span>enummeration</span>shading of underground model components:
		<dl>
			<dt>CV.SHADING_HEIGHT</dt><dd>shading by height above dataum</dd>
			<dt>CV.SHADING_INCLINATION</dt><dd>shading by leg inclination</dd>
			<dt>CV.SHADING_LENGTH</dt><dd>shading by leg length</dd>
			<dt>CV.SHADING_SURVEY</dt><dd>shading by section of survey</dd>
			<dt>CV.SHADING_SINGLE</dt><dd>all components shown as white</dd>
			<dt>CV.SHADING_DEPTH</dt><dd>shading by depth below surface (requires terrain)</dd>
		</dl>
	</dd>
	<dt>splays</dt>
	<dd><span>boolean</span>visibility of splay legs <span>default: false</span></dd>
	<dt>stations</dt>
	<dd><span>boolean</span>visibility of station markers <span>default: false</span></dd>
	<dt>stationLabels</dt>
	<dd><span>boolean</span>visibility of station names <span>default: false</span></dd>
	<dt>surface</dt>
	<dd><span>boolean</span>visibility of surface legs <span>default: false</span></dd>
	<dt>terrain</dt>
	<dd><span>boolean</span>visibility of terrain (if available) <span>default: false</span></dd>
	<dt>terrainOpacity</dt>
	<dd><span>float</span>The opacity of the terrain between 0 (fully transparent) and 1 (opaque) <span>default: 0.5</span></dd>
	<dt>terrainShading</dt>
	<dd><span>enummeration</span>shading appplied to the terrain surface:
		<dl>
			<dt>CV.SHADING_SHADED</dt><dd>The terrain is shaded by inclination.</dd>
			<dt>CV.SHADING_HEIGHT</dt><dd>The terrain is shaded by height.</dd>
			<dt>CV.SHADING_OVERLAY</dt><dd>A overlay image or set of images is displayed on the terrain*.</dd>
		</dl>
		<p>*Therion .lox models may contain an overlay image. If a external terrain is provided for a Survex .3d model, image tiles from a 'slippy map' tile server may be used.</p>
	</dd>
	<dt>view</dt>
	<dd><span>enummeration</span>the initial viewpoint:
		<dl>
			<dt>CV.VIEW_PLAN</dt><dd>A plan view of the complete model. The default view.</dd>
			<dt>CV.VIEW_ELEVATION_N</dt><dd>An elevation view from the North*.</dd>
			<dt>CV.VIEW_ELEVATION_S</dt><dd>An elevation from the South*.</dd>
			<dt>CV.VIEW_ELEVATION_E</dt><dd>An elevation from the East*.</dd>
			<dt>CV.VIEW_ELEVATION_W</dt><dd>An elevation from the West*.</dd>
		</dl>
		<p>* Assuming the positive y axis is North and the positive x axis is East.</p>
	</dd>
	<dt>walls</dt>
	<dd><span>boolean</span>visibility of basic cross section messurement (LRUD) based passage walls <span>default: false</span></dd>
</dl>

</body>
</html>
